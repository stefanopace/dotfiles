colored_by_exit_code () {
	[ $? == 0 ] && color_code='32' || color_code='31'
	echo -e "\e[${color_code}m$(cat /dev/stdin)\e[00m"
}

arrow_based_on_user () {
	case $(whoami) in
		"stefano") echo "|>" ;;
		   "root") echo "+>" ;;
		        *) echo "??" ;;
	esac
}

PS1='`arrow_based_on_user | colored_by_exit_code`'
