# vim syntax=sh
PS1='`
current_status=$?
status_color=$([ $current_status == 0 ] && echo '\\[\\e[32m\\]' || echo '\\[\\e[31m\\]')
current_branch=$(git rev-parse --is-inside-work-tree &> /dev/null && git rev-parse --abbrev-ref HEAD | tr -d "\n")
current_time=$(date +"%H:%M:%S")
branch_space=$([ -n "$current_branch" ] && echo "$((${#current_branch}+2))" || echo '0')
time_space=$((${#current_time}+2))
bar_length=$(($(tput cols)-$branch_space-$time_space))
printf "$status_color"
printf '%.s─' $(seq 1 $bar_length)
if [ -n "$current_branch" ]; then
    printf "╼\[\e[33m\]$current_branch\[\e[00m\]$status_color╾"
fi
printf "╼\[\e[36m\]$current_time$status_color╾"
`\n\[\e[93m\]`test -n "$PROMPT_REMOVE_HOSTNAME" || ( cat /etc/hostname | tr -d "\n" && echo : )`\[\e[00m\]`
d | sed -E "s|([^/]+)|\[\e[94m\]\1\[\e[00m\]|g"
case $(whoami) in
    "stefano") echo ">"  ;;
       "root") echo "#>" ;;
            *) echo "??>";;
esac`'
