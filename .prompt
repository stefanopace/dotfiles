# vim syntax=sh
PROMPT_COMMAND='PS1="$(
current_status=$?
hostname=$(cat /etc/hostname)
whoami=$(whoami)
working_dir=$(pwd)
inside_git_repo=$(git rev-parse --is-inside-work-tree 2> /dev/null)
current_branch=''
git_root_dir=''
if [ -n "$inside_git_repo" ]; then
    current_branch=$(git rev-parse --abbrev-ref HEAD 2> /dev/null | tr -d "\n")
    git_root_dir=$(git rev-parse --show-toplevel)
fi
prompt=$(python3 ~/dotfiles/prompt.py "$current_status" "$whoami" "$hostname" "$working_dir" "$inside_git_repo" "$current_branch" "$git_root_dir")
echo -e "$prompt")"'