# vim syntax=sh
alias grep='grep --color=auto'
alias ls='ls --color=auto -p'
alias ll='ls -lahFtr'
alias la='ls -A'

alias cdow='cd ~/downloads'
alias cdot='cd ~/dotfiles'
alias cdsc='cd ~/Scrivania'
alias cdside='cd ~/Scrivania/side-projects'

alias each='xargs -L1 -I{}'
alias gatto='cat'
alias meno='less'
alias reloadbashrc='source ~/.bashrc'
alias xresourcesreload='xrdb ~/.Xresources'
alias jsoncat='python -m json.tool'
alias clip="tee /dev/tty | perl -pe 'chomp if eof' | xclip -sel clip"
alias open='xdg-open'
alias readxresources='xrdb -merge ~/.Xresources'
alias voc='cat /usr/share/dict/words | ff'
alias standby='systemctl suspend'
alias ask='zenity'
alias alert='notify-send --urgency=low -i "$([ $? = 0 ] && echo terminal || echo error)" "$(history|tail -n1|sed -e '\''s/^\s*[0-9]\+\s*//;s/[;&|]\s*alert$//'\'')"'

alias vimcheatsheet='surf https://vim.rtorr.com/lang/it'
alias j='eeks --configurations ~/dotfiles/eeks-configs/izi.json --source ~/dotfiles/eeks-configs/render-weather.sh'

d () {
  PATHS[9]=^/home/stefanopace
  ICONS[9]="~"
  PATHS[8]=^/home/stefanopace/dotfiles
  ICONS[8]=•
  PATHS[7]=^/home/stefanopace/projects
  ICONS[7]=j
  PATHS[6]=^/home/stefanopace/projects/devbox
  ICONS[6]=x
  PATHS[5]=^/home/stefanopace/projects/devbox/nap/htdocs/dev
  ICONS[5]=b
  PATHS[4]=^/home/stefanopace/downloads
  ICONS[4]=↓
  PATHS[3]=^/home/stefanopace/Scrivania/work-in-progress
  ICONS[3]=%
  PATHS[2]=^/home/stefanopace/Scrivania/side-projects
  ICONS[2]=€
  PATHS[1]=^/home/stefanopace/Scrivania/utilities/bakeca/maildeploy
  ICONS[1]=↑

  pwd |
  while read pwd; do
    for i in $(seq 1 ${#PATHS[@]}); do
      if [[ $pwd =~ ${PATHS[$i]} ]]; then
          echo -n $pwd | sed -E "s|${PATHS[$i]}|${ICONS[$i]}|";
          break 2;
      fi
    done;
    echo -n $pwd
  done
}

title () {
	echo -en "\x1b]0;$@\x07"
}

ssh-generate-for-github () {
	if test ! -f "~/.ssh/id_rsa.pub"; then
		if test -f "~/.ssh/id_rsa"; then
			echo "esiste gia un file id_rsa"
			exit 1
		fi
		ssh-keygen -t rsa -b 4096 -C "stefanopace01@gmail.com" -f "/home/stefano/.ssh/id_rsa"
		chmod go-rwx ~/.ssh/id_rsa
	fi
	eval "$(ssh-agent -s)"
	ssh-add ~/.ssh/id_rsa
	cat ~/.ssh/id_rsa.pub | clip
	echo "https://github.com/settings/keys"
}

applist () {
	dpkg-query --show --showformat='${package}\n' \
	| fzf --preview 'dpkg-query --show --showformat=\${description} {}'\
		--preview-window=down:wrap --layout=reverse --bind=down:preview-down,up:preview-up
}

run () {
  find /usr/share/applications ~/.local/share/applications -name '*.desktop' -print0 \
  | xargs -0 grep -i -l "Terminal=false" \
  | sed -E 's|(.*/)([^/]+)(\.desktop)|\1 \2 \3|' \
  | sort | uniq \
  | fzf --delimiter=' ' --with-nth 2 --layout=reverse --preview-window=wrap \
    --preview 'echo {} | tr -d " " | xargs cat | grep -i ^comment= | sed -E "s#^comment= ?(.*)#\1#i"'\
  | tr -d ' ' \
  | xargs grep -i ^exec \
  | head -n1 \
  | sed 's/exec=//i' \
  | (each sh -c {} &>/dev/null &)
}
